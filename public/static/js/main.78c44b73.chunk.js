(this["webpackJsonpreact-we"]=this["webpackJsonpreact-we"]||[]).push([[0],{130:function(e,t,a){e.exports=a.p+"static/media/cross.ddebb7bd.svg"},131:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),c=a.n(r),i=a(7),l=a(159),s=a(8),u=a(15),m=a(148),d=a(160),g=a(161),f=a(149),b=a(150),p=a(152),h=a(153),j=a(154),O=a(155),E=a(151),v=a(74),k=a.n(v),y=a(72),w=a.n(y),x=a(38),N=a.n(x),R=Object(i.atom)({key:"location",default:{latitude:50.4501,longitude:30.5234}}),C=Object(i.atom)({key:"view",default:{latitude:50.4501,longitude:30.5234}}),S=Object(i.atom)({key:"marker",default:null}),I=Object(i.atom)({key:"markers",default:{type:"FeatureCollection",features:[]}}),F=Object(i.atom)({key:"creating",default:!1}),L=Object(i.atom)({key:"bar",default:{height:70}}),B=Object(i.atom)({key:"map",default:{}}),P=a(18),z=Object(m.a)((function(e){return{appbar:{zIndex:999},button:{margin:e.spacing(0),marginLeft:"auto"},progress:{color:"inherit"},progressText:{color:"inherit",marginRight:"1rem"},progressLoaderContainer:{display:"flex",marginLeft:"auto"},userProfileContainer:{display:"flex",alignItems:"center",marginLeft:"auto",marginRight:0},userProfileAvatar:{height:24,width:24,marginRight:e.spacing(2)}}})),M=function(){var e=z(),t=Object(P.i)(),a=Object(P.l)(),n=new w.a.auth.GoogleAuthProvider;return a?o.a.createElement("div",{className:e.userProfileContainer},o.a.createElement(g.a,{alt:a.displayName,src:a.photoURL,className:e.userProfileAvatar}),o.a.createElement(f.a,{className:e.progressText,type:"body1",component:"p"},a.displayName),o.a.createElement(b.a,{onClick:function(){return t.signOut().then((function(){console.log("logout")}))},dense:"true",color:"inherit",className:e.button},"Logout")):o.a.createElement(b.a,{onClick:function(){t.signInWithRedirect(n)},dense:"true",color:"inherit",className:e.button},o.a.createElement(E.a,null),"Login")},T=function(e){var t=z(),a=Object(n.useRef)(),r=N()(a),c=Object(i.useRecoilState)(L),l=Object(s.a)(c,2),u=(l[0],l[1]);return Object(n.useEffect)((function(){u(r)}),[r]),o.a.createElement(p.a,{position:"static",className:t.appbar,ref:a},o.a.createElement(h.a,null,o.a.createElement(j.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"},o.a.createElement(k.a,null)),o.a.createElement(f.a,{type:"title",color:"inherit",className:t.flex,style:{marginLeft:15}},"Wecity"),o.a.createElement(n.Suspense,{fallback:o.a.createElement("div",{className:t.progressLoaderContainer},o.a.createElement(O.a,{size:24,className:t.progress}),o.a.createElement(f.a,{className:t.progressText,type:"body1",component:"p"},"Loading.."))},o.a.createElement(M,null))))},A=a(22),V=a(3),W=a(81),G=a(16),q=a(156),J=a(26),U={apiKey:"AIzaSyC0R35s-u9bZCZOpwg8jVIzYg77HeKgr0Y",authDomain:"wecity-223ab.firebaseapp.com",databaseURL:"https://wecity-223ab.firebaseio.com",projectId:"wecity-223ab",storageBucket:"wecity-223ab.appspot.com",messagingSenderId:"766690753861",appId:"1:766690753861:web:dd74263fa376676b10922c",measurementId:"G-017VVRXFJC"},D="pk.eyJ1Ijoic3dpdGNoOSIsImEiOiJjamozeGV2bnkxajV2M3FvNnpod3h4ODlpIn0.CTt2IXV8II6finbTlxEddg",H={account:"account",signup:"signup",login:"login",recoverCode:"recoverCode",recoverEmail:"recoverEmail"},K={list:"/projects",account:"/account",detail:":projectname",login:"/login",signup:"/signup"},X=(Object(A.a)(Object(A.a)({},K),H),a(25)),Y=a(76),Z=(a(130),a(77)),$=a.n(Z),_=a(78),Q=a.n(_),ee=a(79),te=a(162),ae=a(134),ne=a(51),oe=a.n(ne),re=a(52),ce=a.n(re),ie=[{label:"San Francisco \u2013 Oakland Bay Bridge, United States",imgPath:"https://images.unsplash.com/photo-1537944434965-cf4679d1a598?auto=format&fit=crop&w=400&h=250&q=60"},{label:"Bird",imgPath:"https://images.unsplash.com/photo-1538032746644-0212e812a9e7?auto=format&fit=crop&w=400&h=250&q=60"},{label:"Bali, Indonesia",imgPath:"https://images.unsplash.com/photo-1537996194471-e657df975ab4?auto=format&fit=crop&w=400&h=250&q=80"},{label:"NeONBRAND Digital Marketing, Las Vegas, United States",imgPath:"https://images.unsplash.com/photo-1518732714860-b62714ce0c59?auto=format&fit=crop&w=400&h=250&q=60"},{label:"Go\u010d, Serbia",imgPath:"https://images.unsplash.com/photo-1512341689857-198e7e2f3ca8?auto=format&fit=crop&w=400&h=250&q=60"}],le=Object(m.a)((function(e){return{root:Object(u.a)({width:"calc( 100% - 2rem )",flexGrow:1,zIndex:999,position:"fixed",bottom:"1rem",right:"1rem",backgroundColor:"white",maxHeight:350},e.breakpoints.up("sm"),{maxWidth:400}),header:{display:"flex",alignItems:"center",height:50,margin:"auto",backgroundColor:e.palette.background.default,textAlign:"center"},img:{height:255,maxWidth:400,overflow:"hidden",display:"block",width:"100%",margin:"auto"}}})),se=function(){var e=le(),t=Object(ee.a)(),a=o.a.useState(0),n=Object(s.a)(a,2),r=n[0],c=n[1],i=ie.length;return o.a.createElement("div",{className:e.root},o.a.createElement(ae.a,{square:!0,elevation:0,className:e.header},o.a.createElement(f.a,{className:e.header},ie[r].label)),o.a.createElement("img",{className:e.img,src:ie[r].imgPath,alt:ie[r].label}),o.a.createElement(te.a,{steps:i,position:"static",variant:"text",activeStep:r,nextButton:o.a.createElement(b.a,{size:"small",onClick:function(){c((function(e){return e+1}))},disabled:r===i-1},"Next","rtl"===t.direction?o.a.createElement(oe.a,null):o.a.createElement(ce.a,null)),backButton:o.a.createElement(b.a,{size:"small",onClick:function(){c((function(e){return e-1}))},disabled:0===r},"rtl"===t.direction?o.a.createElement(ce.a,null):o.a.createElement(oe.a,null),"Back")}))},ue=a(157);function me(){var e=Object(P.j)(),t=Object(n.useState)(Y.initializeApp(e));return Object(s.a)(t,1)[0]}var de=Object(m.a)((function(e){return{mapContainer:{flexGrow:0,height:"100%",position:"relative"},overlay:{position:"absolute",zIndex:0,backgroundColor:"rgba(0,0,0,0.2)",width:"100%",height:"100%",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},createFab:{position:"absolute",top:"2rem",right:"2rem"},marker:{position:"absolute",top:"calc( ( 100% - 350px ) / 2  )",left:"50%",transform:"translate(-16px, -16px)"}}})),ge=function(){var e=me(),t=Object(i.useRecoilState)(I),a=Object(s.a)(t,2),r=a[0],c=a[1],l=Object(i.useRecoilState)(R),u=Object(s.a)(l,2),m=(u[0],u[1],Object(i.useRecoilValue)(C)),d=Object(n.useState)(null),g=Object(s.a)(d,2),f=g[0],b=g[1];return Object(n.useEffect)((function(){console.log("Firestore test"),e.collection("markers").near({center:Object(W.a)(X.firestore.GeoPoint,Object(G.a)(Object.values(m))),radius:1e3}).get().then((function(e){var t=e.docs.map((function(e){var t=e.data(),a=t.coordinates,n=(t.g,Object(V.a)(t,["coordinates","g"]));return{type:"Feature",geometry:{type:"Point",coordinates:Object.values(a)},properties:n}}));c({type:"FeatureCollection",features:t}),console.log(r)}))}),[e]),o.a.createElement(o.a.Fragment,null,o.a.createElement(J.c,{id:"markers",type:"geojson",data:r}),o.a.createElement(J.b,{id:"markers",type:"symbol",source:"markers",paint:{"text-color":"black","text-opacity":1,"text-halo-width":1,"text-halo-color":"white"},layout:{"icon-image":"marker","text-field":["get","name"],"text-anchor":"bottom","text-font":["Montserrat SemiBold"],"text-size":13,"text-padding":12,"text-offset":[0,2.2]},onHover:function(e){if(e.features.length>0){var t=e.features[0].id;f!==t&&b(t)}},onLeave:function(){f&&b(null)}}),f&&o.a.createElement(J.a,{id:f,source:"markers",state:{hover:!0}}))},fe=function(){var e=me(),t=Object(i.useRecoilState)(S),a=Object(s.a)(t,2),r=a[0],c=(a[1],Object(i.useRecoilState)(F)),l=Object(s.a)(c,2),u=l[0],m=(l[1],de());return Object(n.useEffect)((function(){e.collection("markers")}),[e]),o.a.createElement(o.a.Fragment,null,u&&!r&&o.a.createElement(o.a.Fragment,null,o.a.createElement(se,null),o.a.createElement("img",{alt:"React Firebase",src:Q.a,className:m.marker,width:32,height:32})),r&&u&&o.a.createElement(o.a.Fragment,null,o.a.createElement(J.c,{id:"newMarker",type:"geojson",data:r}),o.a.createElement(J.b,{id:"newMarker",type:"symbol",source:"newMarker",paint:{"text-color":"black","text-opacity":1,"icon-opacity-transition":{duration:0},"text-halo-width":1,"text-halo-color":"white"},layout:{"icon-image":"marker","icon-ignore-placement":!0,"icon-allow-overlap":!0,"text-field":["get","name"],"text-anchor":"bottom","text-font":["Montserrat SemiBold"],"text-size":13,"text-padding":12,"text-offset":[0,2.2]},transition:{duration:0,delay:0}})))},be=function(e){var t=e.active,a=e.getMarker,r=de(),c=Object(i.useRecoilState)(F),l=Object(s.a)(c,2),u=l[0],m=l[1],d=Object(i.useRecoilState)(C),g=Object(s.a)(d,2),f=(g[0],g[1],Object(i.useRecoilState)(S)),b=Object(s.a)(f,2),p=(b[0],b[1]),h=Object(n.useState)(!1),j=Object(s.a)(h,2),O=j[0];j[1];return Object(n.useEffect)((function(){}),[O]),o.a.createElement(o.a.Fragment,null,u?o.a.createElement(o.a.Fragment,null,o.a.createElement(q.a,{onClick:function(){console.log(a());var e={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:Object.values(a())}}]};p(e)},className:r.createFab,raised:"true",color:"primary","aria-label":"add"},o.a.createElement(ue.a,null))):o.a.createElement(q.a,{disabled:!t,onClick:function(){m(!0)},raised:"true",className:r.createFab},o.a.createElement("img",{alt:"React Firebase",src:$.a,width:32,height:32})))},pe=function(){var e=de(),t=Object(i.useRecoilState)(R),a=Object(s.a)(t,2),r=a[0],c=a[1],l=Object(i.useRecoilState)(C),u=Object(s.a)(l,2),m=(u[0],u[1]),d=Object(n.useState)(Object(A.a)(Object(A.a)({},r),{},{zoom:15})),g=Object(s.a)(d,2),f=g[0],b=g[1],p=Object(n.useRef)();return Object(n.useEffect)((function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){console.log("Latitude is :",e.coords.latitude),console.log("Longitude is :",e.coords.longitude);var t=Object.assign(f,{longitude:e.coords.longitude,latitude:e.coords.latitude});c(t)}))}),[navigator,navigator.geolocation]),Object(n.useEffect)((function(){if(p.current){var e=p.current.getMap();m(e.getCenter())}}),[p.current,f]),o.a.createElement(o.a.Fragment,null,o.a.createElement(n.Suspense,{fallback:o.a.createElement(be,{active:!1})},o.a.createElement(P.a,{fallback:o.a.createElement(be,{active:!1})},o.a.createElement(be,{active:!0,getMarker:function(){return p.current.getMap().getCenter()}}))),o.a.createElement(J.d,Object.assign({style:{width:"100%",height:"100%",border:"none",outline:"none"},mapStyle:"mapbox://styles/switch9/ckahu5spr0amr1ik3n1fg0fvt",accessToken:D,onViewportChange:b,ref:p},f),o.a.createElement(P.c,{fallback:o.a.createElement("div",{className:e.overlay},o.a.createElement(O.a,null)),traceId:"load-markers"},o.a.createElement(ge,null),o.a.createElement(fe,null))))},he=Object(m.a)((function(e){return{root:{position:"fixed",top:0,bottom:0,left:0,right:0},map:{top:70,width:"100%",height:"100%",position:"fixed"},sidebar:Object(u.a)({marginTop:"100%",width:"100%"},e.breakpoints.up("sm"),{marginTop:0,width:"50%",maxWidth:400,justify:"flex-end",float:"right"})}})),je=function(){var e=he(),t=Object(i.useRecoilState)(L),a=Object(s.a)(t,2),r=a[0];a[1];Object(n.useEffect)((function(){console.log(r)}),[r]);var c=Object(n.useRef)(),l=N()(c),u=Object(i.useRecoilState)(B),m=Object(s.a)(u,2),g=(m[0],m[1]);return Object(n.useEffect)((function(){g(l)}),[l]),o.a.createElement(d.a,{className:e.root},o.a.createElement(T,null),o.a.createElement(d.a,{className:e.map,style:{top:r.height},ref:c},o.a.createElement(pe,null)))},Oe=a(80),Ee=a(45),ve=a(158),ke=Object(Oe.a)({palette:{primary:{light:Ee.a[400],main:Ee.a[800],dark:Ee.a[900],contrastText:"#fff"},secondary:{light:"#ff7961",main:"#f44336",dark:"#ba000d",contrastText:"#000"},accent:Object(A.a)({},ve.a)},overrides:{MuiAppBar:{height:100}}}),ye=function(){return o.a.createElement(P.b,{firebaseConfig:U},o.a.createElement(l.a,{theme:ke},o.a.createElement(i.RecoilRoot,null,o.a.createElement(je,null))))},we=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function xe(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(131);c.a.unstable_createRoot(document.getElementById("root")).render(o.a.createElement(ye,null)),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");we?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):xe(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):xe(e)}))}}()},77:function(e,t,a){e.exports=a.p+"static/media/addlocation.223c5c8b.svg"},78:function(e,t,a){e.exports=a.p+"static/media/marker.9960d3bf.svg"},97:function(e,t,a){e.exports=a(132)}},[[97,1,2]]]);
//# sourceMappingURL=main.78c44b73.chunk.js.map